<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Blackjack</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #1a2a3a;
            --accent: #f1c40f;
            --accent-dark: #f39c12;
            --text: #ecf0f1;
            --success: #2ecc71;
            --danger: #e74c3c;
            --card-width: 80px;
            --card-height: 120px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--primary);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                              url('https://images.unsplash.com/photo-1596838132731-3301c3fd4317?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');
            background-size: cover;
            background-position: center;
        }
        
        .container {
            width: 100%;
            max-width: 900px;
            background-color: rgba(30, 30, 30, 0.9);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .screen {
            display: none;
            padding: 30px;
        }
        
        .active {
            display: block;
        }
        
        h1, h2, h3 {
            color: var(--accent);
            margin-bottom: 20px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 30px;
        }
        
        h2 {
            font-size: 1.8rem;
        }
        
        h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #444;
            border-radius: 6px;
            background-color: #333;
            color: var(--text);
            font-size: 1rem;
        }
        
        input:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .btn {
            background-color: var(--accent);
            color: var(--primary);
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: inline-block;
            text-align: center;
        }
        
        .btn:hover {
            background-color: var(--accent-dark);
            transform: translateY(-2px);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .link {
            color: var(--accent);
            text-decoration: none;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .link:hover {
            color: var(--accent-dark);
        }
        
        .text-center {
            text-align: center;
        }
        
        .mt-20 {
            margin-top: 20px;
        }
        
        /* Card styles */
        .card {
            width: var(--card-width);
            height: var(--card-height);
            background-color: white;
            border-radius: 8px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            margin: 0 5px;
            position: relative;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
            font-weight: bold;
            font-size: 1.5rem;
        }
        
        .card.red {
            color: #e74c3c;
        }
        
        .card.black {
            color: #2c3e50;
        }
        
        .card-back {
            background: repeating-linear-gradient(
                45deg,
                #d10000,
                #d10000 10px,
                #8b0000 10px,
                #8b0000 20px
            );
            color: white;
        }
        
        .card-value {
            position: absolute;
            top: 5px;
            left: 5px;
            font-size: 1rem;
        }
        
        .card-suit {
            font-size: 2rem;
        }
        
        /* Game area styles */
        .game-area {
            background-color: #0a5c36;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            position: relative;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        .hand {
            min-height: var(--card-height);
            margin: 20px 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .player-area, .dealer-area {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .player-area {
            background-color: rgba(0, 0, 0, 0.2);
        }
        
        .dealer-area {
            background-color: rgba(0, 0, 0, 0.3);
        }
        
        /* Chip styles */
        .chip {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: white;
            margin: 0 5px;
            cursor: pointer;
            transition: transform 0.3s;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.3);
        }
        
        .chip:hover {
            transform: translateY(-5px) scale(1.1);
        }
        
        .chip.low {
            background-color: #27ae60;
            border: 3px solid #2ecc71;
        }
        
        .chip.medium {
            background-color: #3498db;
            border: 3px solid #2980b9;
        }
        
        .chip.high {
            background-color: #e74c3c;
            border: 3px solid #c0392b;
        }
        
        /* Message area */
        .message {
            font-size: 1.2rem;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
            min-height: 30px;
            color: var(--accent);
        }
        
        /* User info */
        .user-info {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px 15px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            :root {
                --card-width: 60px;
                --card-height: 90px;
            }
            
            .container {
                border-radius: 0;
                min-height: 100vh;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .controls .btn {
                width: 100%;
                max-width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login Screen -->
        <div id="login-screen" class="screen active">
            <h1>Premium Blackjack</h1>
            <div id="login-form">
                <h2>Welcome Back</h2>
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter your password">
                </div>
                <button id="login-btn" class="btn btn-block">Login</button>
                <p class="text-center mt-20">Don't have an account? <a class="link" id="show-signup">Sign up</a></p>
            </div>
            <div id="signup-form" style="display:none">
                <h2>Create Account</h2>
                <div class="form-group">
                    <label for="new-username">Username</label>
                    <input type="text" id="new-username" placeholder="Choose a username">
                </div>
                <div class="form-group">
                    <label for="new-password">Password</label>
                    <input type="password" id="new-password" placeholder="Choose a password">
                </div>
                <div class="form-group">
                    <label for="confirm-password">Confirm Password</label>
                    <input type="password" id="confirm-password" placeholder="Confirm your password">
                </div>
                <button id="signup-btn" class="btn btn-block">Sign Up</button>
                <p class="text-center mt-20">Already have an account? <a class="link" id="show-login">Login</a></p>
            </div>
        </div>

        <!-- Menu Screen -->
        <div id="menu-screen" class="screen">
            <h1>Select Your Stakes</h1>
            <div class="user-info">
                <div>
                    <span id="display-username"></span> | 
                    Balance: $<span id="balance">1000</span>
                </div>
                <button id="logout-btn" class="btn btn-danger">Logout</button>
            </div>
            
            <div class="stakes">
                <div class="stake-option">
                    <h3>Low Stakes</h3>
                    <p>$5 - $100 bets</p>
                    <button class="btn btn-block stake-btn" data-stake="low">Play Now</button>
                </div>
                
                <div class="stake-option" style="margin: 20px 0;">
                    <h3>Medium Stakes</h3>
                    <p>$50 - $500 bets</p>
                    <button class="btn btn-block stake-btn" data-stake="medium">Play Now</button>
                </div>
                
                <div class="stake-option">
                    <h3>High Stakes</h3>
                    <p>$500 - $5000 bets</p>
                    <button class="btn btn-block stake-btn" data-stake="high">Play Now</button>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <h1>Blackjack</h1>
            <div class="user-info">
                <div>
                    <span id="game-username"></span> | 
                    Balance: $<span id="game-balance">1000</span> | 
                    Bet: $<span id="current-bet">0</span>
                </div>
                <button id="game-logout-btn" class="btn btn-danger">Leave Table</button>
            </div>
            
            <div class="game-area">
                <div class="dealer-area">
                    <h3>Dealer</h3>
                    <div id="dealer-hand" class="hand"></div>
                </div>
                
                <div class="player-area">
                    <h3>Player</h3>
                    <div id="player-hand" class="hand"></div>
                </div>
                
                <div class="message" id="message"></div>
                
                <div id="betting-controls">
                    <h3>Place Your Bet</h3>
                    <div id="chips" style="text-align: center; margin: 15px 0;">
                        <div class="chip low" data-amount="5">5</div>
                        <div class="chip low" data-amount="10">10</div>
                        <div class="chip low" data-amount="25">25</div>
                        <div class="chip low" data-amount="50">50</div>
                        <div class="chip low" data-amount="100">100</div>
                    </div>
                    <div class="controls">
                        <button id="clear-bet" class="btn">Clear Bet</button>
                        <button id="deal-btn" class="btn btn-success">Deal</button>
                    </div>
                </div>
                
                <div id="game-controls" style="display:none">
                    <div class="controls">
                        <button id="hit-btn" class="btn">Hit</button>
                        <button id="stand-btn" class="btn btn-danger">Stand</button>
                        <button id="double-btn" class="btn">Double</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game state
        const game = {
            user: null,
            users: JSON.parse(localStorage.getItem('blackjackUsers')) || [],
            stake: null,
            deck: [],
            dealerHand: [],
            playerHand: [],
            bet: 0,
            balance: 1000,
            gameActive: false
        };

        // DOM elements
        const screens = {
            login: document.getElementById('login-screen'),
            menu: document.getElementById('menu-screen'),
            game: document.getElementById('game-screen')
        };

        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const showSignup = document.getElementById('show-signup');
        const showLogin = document.getElementById('show-login');
        const loginBtn = document.getElementById('login-btn');
        const signupBtn = document.getElementById('signup-btn');
        const stakeBtns = document.querySelectorAll('.stake-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const gameLogoutBtn = document.getElementById('game-logout-btn');
        const usernameDisplay = document.getElementById('display-username');
        const balanceDisplay = document.getElementById('balance');
        const gameUsernameDisplay = document.getElementById('game-username');
        const gameBalanceDisplay = document.getElementById('game-balance');
        const currentBetDisplay = document.getElementById('current-bet');
        const dealerHandDisplay = document.getElementById('dealer-hand');
        const playerHandDisplay = document.getElementById('player-hand');
        const messageDisplay = document.getElementById('message');
        const chips = document.querySelectorAll('.chip');
        const clearBetBtn = document.getElementById('clear-bet');
        const dealBtn = document.getElementById('deal-btn');
        const hitBtn = document.getElementById('hit-btn');
        const standBtn = document.getElementById('stand-btn');
        const doubleBtn = document.getElementById('double-btn');
        const bettingControls = document.getElementById('betting-controls');
        const gameControls = document.getElementById('game-controls');

        // Event listeners
        showSignup.addEventListener('click', () => {
            loginForm.style.display = 'none';
            signupForm.style.display = 'block';
        });

        showLogin.addEventListener('click', () => {
            signupForm.style.display = 'none';
            loginForm.style.display = 'block';
        });

        loginBtn.addEventListener('click', login);
        signupBtn.addEventListener('click', signup);
        logoutBtn.addEventListener('click', logout);
        gameLogoutBtn.addEventListener('click', leaveGame);

        stakeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                game.stake = btn.dataset.stake;
                showScreen('game');
                updateStake();
            });
        });

        chips.forEach(chip => {
            chip.addEventListener('click', () => {
                const amount = parseInt(chip.dataset.amount);
                placeBet(amount);
            });
        });

        clearBetBtn.addEventListener('click', clearBet);
        dealBtn.addEventListener('click', deal);
        hitBtn.addEventListener('click', hit);
        standBtn.addEventListener('click', stand);
        doubleBtn.addEventListener('click', double);

        // Functions
        function showScreen(screen) {
            Object.values(screens).forEach(s => s.classList.remove('active'));
            screens[screen].classList.add('active');
        }

        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            const user = game.users.find(u => u.username === username && u.password === password);
            
            if (user) {
                game.user = user;
                game.balance = user.balance;
                updateUserDisplay();
                showScreen('menu');
            } else {
                showMessage('Invalid username or password');
            }
        }

        function signup() {
            const username = document.getElementById('new-username').value;
            const password = document.getElementById('new-password').value;
            const confirm = document.getElementById('confirm-password').value;
            
            if (password !== confirm) {
                showMessage("Passwords don't match");
                return;
            }
            
            if (game.users.some(u => u.username === username)) {
                showMessage("Username already exists");
                return;
            }
            
            const newUser = { username, password, balance: 1000 };
            game.users.push(newUser);
            localStorage.setItem('blackjackUsers', JSON.stringify(game.users));
            
            game.user = newUser;
            game.balance = 1000;
            updateUserDisplay();
            showScreen('menu');
            
            // Switch back to login form and clear inputs
            showLogin.click();
            document.getElementById('new-username').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-password').value = '';
        }

        function logout() {
            saveUser();
            game.user = null;
            showScreen('login');
        }

        function leaveGame() {
            saveUser();
            showScreen('menu');
            resetGame();
        }

        function saveUser() {
            if (game.user) {
                const userIndex = game.users.findIndex(u => u.username === game.user.username);
                if (userIndex !== -1) {
                    game.users[userIndex].balance = game.balance;
                    localStorage.setItem('blackjackUsers', JSON.stringify(game.users));
                }
            }
        }

        function updateUserDisplay() {
            if (game.user) {
                usernameDisplay.textContent = game.user.username;
                balanceDisplay.textContent = game.balance;
                gameUsernameDisplay.textContent = game.user.username;
                gameBalanceDisplay.textContent = game.balance;
            }
        }

        function updateStake() {
            const chipValues = {
                low: [5, 10, 25, 50, 100],
                medium: [50, 100, 250, 500, 1000],
                high: [500, 1000, 2500, 5000, 10000]
            };
            
            // Update chip values and colors
            chips.forEach((chip, index) => {
                chip.textContent = chipValues[game.stake][index];
                chip.dataset.amount = chipValues[game.stake][index];
                
                // Remove all stake classes
                chip.classList.remove('low', 'medium', 'high');
                
                // Add current stake class
                chip.classList.add(game.stake);
            });
        }

        function placeBet(amount) {
            if (game.gameActive) return;
            
            const newBet = game.bet + amount;
            
            if (newBet > game.balance) {
                showMessage("Not enough balance");
                return;
            }
            
            game.bet = newBet;
            currentBetDisplay.textContent = game.bet;
        }

        function clearBet() {
            if (game.gameActive) return;
            game.bet = 0;
            currentBetDisplay.textContent = game.bet;
        }

        function deal() {
            if (game.gameActive || game.bet <= 0) return;
            
            game.balance -= game.bet;
            gameBalanceDisplay.textContent = game.balance;
            
            game.gameActive = true;
            game.deck = createDeck();
            game.dealerHand = [drawCard(), drawCard()];
            game.playerHand = [drawCard(), drawCard()];
            
            renderHands();
            bettingControls.style.display = 'none';
            gameControls.style.display = 'block';
            
            // Check for blackjack
            if (calculateHandValue(game.playerHand) === 21) {
                const dealerValue = calculateHandValue(game.dealerHand);
                
                if (dealerValue === 21) {
                    endGame('push');
                } else {
                    endGame('blackjack');
                }
            }
        }

        function hit() {
            if (!game.gameActive) return;
            
            game.playerHand.push(drawCard());
            renderHands();
            
            const playerValue = calculateHandValue(game.playerHand);
            
            if (playerValue > 21) {
                endGame('lose');
            } else if (playerValue === 21) {
                stand();
            }
        }

        function stand() {
            if (!game.gameActive) return;
            
            // Reveal dealer's card
            renderHands(true);
            
            // Dealer draws until 17 or higher
            while (calculateHandValue(game.dealerHand) < 17) {
                game.dealerHand.push(drawCard());
                renderHands(true);
            }
            
            const playerValue = calculateHandValue(game.playerHand);
            const dealerValue = calculateHandValue(game.dealerHand);
            
            if (dealerValue > 21) {
                endGame('win');
            } else if (dealerValue > playerValue) {
                endGame('lose');
            } else if (playerValue > dealerValue) {
                endGame('win');
            } else {
                endGame('push');
            }
        }

        function double() {
            if (!game.gameActive || game.bet * 2 > game.balance) return;
            
            game.balance -= game.bet;
            game.bet *= 2;
            gameBalanceDisplay.textContent = game.balance;
            currentBetDisplay.textContent = game.bet;
            
            game.playerHand.push(drawCard());
            renderHands();
            
            const playerValue = calculateHandValue(game.playerHand);
            
            if (playerValue > 21) {
                endGame('lose');
            } else {
                stand();
            }
        }

        function createDeck() {
            const suits = ['♠', '♣', '♥', '♦'];
            const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
            const deck = [];
            
            for (const suit of suits) {
                for (const value of values) {
                    deck.push({ suit, value });
                }
            }
            
            // Shuffle
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            
            return deck;
        }

        function drawCard() {
            return game.deck.pop();
        }

        function calculateHandValue(hand) {
            let value = 0;
            let aces = 0;
            
            for (const card of hand) {
                if (card.value === 'A') {
                    value += 11;
                    aces++;
                } else if (['K', 'Q', 'J'].includes(card.value)) {
                    value += 10;
                } else {
                    value += parseInt(card.value);
                }
            }
            
            while (value > 21 && aces > 0) {
                value -= 10;
                aces--;
            }
            
            return value;
        }

        function renderHands(showDealerCard = false) {
            dealerHandDisplay.innerHTML = '';
            playerHandDisplay.innerHTML = '';
            
            // Dealer's hand
            game.dealerHand.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                
                if (index === 0 && !showDealerCard && game.gameActive) {
                    cardElement.classList.add('card-back');
                    dealerHandDisplay.appendChild(cardElement);
                } else {
                    if (card.suit === '♥' || card.suit === '♦') {
                        cardElement.classList.add('red');
                    } else {
                        cardElement.classList.add('black');
                    }
                    
                    const valueElement = document.createElement('div');
                    valueElement.className = 'card-value';
                    valueElement.textContent = card.value;
                    
                    const suitElement = document.createElement('div');
                    suitElement.className = 'card-suit';
                    suitElement.textContent = card.suit;
                    
                    cardElement.appendChild(valueElement);
                    cardElement.appendChild(suitElement);
                    dealerHandDisplay.appendChild(cardElement);
                }
            });
            
            // Player's hand
            game.playerHand.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                
                if (card.suit === '♥' || card.suit === '♦') {
                    cardElement.classList.add('red');
                } else {
                    cardElement.classList.add('black');
                }
                
                const valueElement = document.createElement('div');
                valueElement.className = 'card-value';
                valueElement.textContent = card.value;
                
                const suitElement = document.createElement('div');
                suitElement.className = 'card-suit';
                suitElement.textContent = card.suit;
                
                cardElement.appendChild(valueElement);
                cardElement.appendChild(suitElement);
                playerHandDisplay.appendChild(cardElement);
            });
        }

        function endGame(result) {
            game.gameActive = false;
            renderHands(true);
            
            let message = '';
            let payout = 0;
            
            switch (result) {
                case 'win':
                    payout = game.bet * 2;
                    message = 'You win!';
                    break;
                case 'lose':
                    payout = 0;
                    message = 'You lose.';
                    break;
                case 'push':
                    payout = game.bet;
                    message = 'Push.';
                    break;
                case 'blackjack':
                    payout = game.bet * 2.5;
                    message = 'Blackjack! You win 3:2!';
                    break;
            }
            
            game.balance += payout;
            game.bet = 0;
            gameBalanceDisplay.textContent = game.balance;
            currentBetDisplay.textContent = game.bet;
            
            showMessage(message);
            bettingControls.style.display = 'block';
            gameControls.style.display = 'none';
            
            saveUser();
        }

        function resetGame() {
            game.deck = [];
            game.dealerHand = [];
            game.playerHand = [];
            game.bet = 0;
            game.gameActive = false;
            
            dealerHandDisplay.innerHTML = '';
            playerHandDisplay.innerHTML = '';
            currentBetDisplay.textContent = game.bet;
            bettingControls.style.display = 'block';
            gameControls.style.display = 'none';
            showMessage('');
        }

        function showMessage(msg) {
            messageDisplay.textContent = msg;
        }

        // Initialize
        showScreen('login');
    </script>
</body>
</html>
